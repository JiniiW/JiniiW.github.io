---
title: "[MySQL] 함수 종속성"
excerpt: "Functional Dependency"

categories:
  - MySQL
tags:
  - [sql, diagram, 정규화]

permalink: MySQL_DataDependency

toc: true
toc_sticky: true

date: 2024-01-29
last_modified_at: 2024-01-29
---

## INTRO

정규화는 데이터 중복을 최소화하고 데이터의 일관성을 유지하기 위해 종속성을 관리하고 제거하는 단계이다.

때문에 정규화를 하기 위해서는 사전에 종속성에 대한 명확한 이해가 필요하다고 생각한다.

---

## 함수 종속성
함수 종속성에 대해 알아보기 위해 각각의 단어를 따로 생각해보자

### 함수
함수는 수학적 의미로 **'두 집합 간의 관계'**를 의미한다.

>즉, 한 입력에 대해 항상 동일한 출력을 반환해야 한다.

### 종속성
종속성은 데이터 간의 관계를 나타내는 일반적인 개념으로 한 속성에 의존하는 것을 의미한다.

>즉, 한 속성값이 변경되면 다른 속성값에 영향을 미칠 수 있다.

### 결론
함수 종속성은 한 속성의 값이 주어지면 다른 속성의 값이 유일하게 결정되어야 한다.

식으로 표현하면 다음과 같다.<br>
`X -> Y`

> X의 속성으로 Y를 구분할 수 있다.

- X : 함수적으로 결정되는 속성
- Y : X에 종속되는 속성

즉, X가 주어지면 Y는 항상 유일하게 결정된다.

## 필요성

함수 종속성이 필요한 이유는 이상현상을 방지하고 데이터의 구조적 설계가 가능하기 때문이다.

1. 이상현상 방지 : 종속성을 파악하면 삽입, 삭제, 갱신 등 발생할 수 있는 이상현상을 방지할 수 있다.
  - 즉, 데이터 일관성을 유지하는데 도움이 된다.
2. 구조화된 데이터 설계 : 종속성을 이해하면 데이터의 흐름과 관계를 파악하여 구조화된 설계를 진행할 수 있다.


## 3가지 유형
이러한 함수 종속성은 대표적으로 3가지 유형이 존재한다.<br>
> 완전 함수 종속성, 부분 함수 종속성, 이행 함수 종속성


아래 테이블을 예시로 생각해보자

<img src = "{{url}}/images/2024-01-29-MySQL_FunctionalDependency/테이블 예시.png" width = "70%">

해당 테이블은 아직 정규화를 진행하기 전이기 때문에 종속관계를 파악해야 한다.


<span style = "color : red">**컬럼명의 의미**</span>를 바탕으로 다이어그램을 통해 종속성을 정의해보자.

<img src = "{{url}}/images/2024-01-29-MySQL_FunctionalDependency/사전작업.png" width = "70%">

이제 다이어그램을 통해 각각의 속성(컬럼)이 어느 유형에 종속적인지 분류할 수 있다.

### 1. 완전 함수 종속성
기본키가 복합키일 때 <span style = "color : purple">보라색 속성</span>인 '**동아리 가입일**'은 동아리 번호와 학번 2개 속성에 모두 종속된다.

(기본키가 한개인 경우에는 하나의 PK에 종속되는 속성을 완전 함수 종속성이라고 한다.)

동아리 가입일
{: .notice}

> 완전 종속되는 속성을 다른 테이블로 옮겨서 제거해야 한다. -> **제 1 정규형**

### 2. 부분 함수 종속성
기본키가 복합키일 때 <span style = "color : blue">파란색 속성</span>인 '**동아리명**', '**동아리 개설일**'은 '동아리 번호에'만 종속되므로 기본키의 일부에만 종속된다고 말 할 수 있다.<br>
'**이름**'과 '**학과번호**'도 마찬가지로 기본키 중 일부인 '학번'에만 종속된다.

동아리명, 동아리 개설일, 이름, 학과번호
{: .notice}

> 부분에 해당하는 속성을 다른 테이블로 옮겨서 제거해야 한다. -> **제 2 정규형**

### 3. 이행 함수 종속성
<span style = "color : green">초록색 속성</span>인 '학과명'은 '학과번호'에 종속되고 '학과번호'는 '학번'에 속하기 때문에 종속성이 연쇄적으로 전파되어 존재한다.

학과명
{: .notice}

> 중간 속성을 다른 테이블로 옮겨서 제거해야 한다. -> **제 3 정규형**

### 결론

이렇게 함수 종속성을 분석하여 기본키를 선정할 수 있다.

- **동아리 번호 -> 동아리명** : 동아리 번호가 주어지면 동아리 명이 결정된다. 
- **동아리 번호 -> 동아리 개설일** : 동아리 번호가 주어지면 동아리 개설일이 결정된다.
- **(동아리 번호, 학번) -> 동아리 가입일** : 동아리 번호와 학번의 조합이 주어지면 동아리 가입일이 결정된다.
- **학번 -> 이름** : 학번이 주어지면 이름도 결정된다.
- **학번 -> 학과번호** : 학번이 주어지면 학과번호가 결정된다.
- **학과번호 -> 학과명** : 학과번호가 주어지면 학과명이 결정된다.

>즉, 화살표 왼쪽 속성에 의해 화살표 오른쪽 속성이 구분되며, 이를 바탕으로 기본키를 선정할 수 있다.

기본키는 동아리 번호, 학번, (동아리번호, 학번), 학과번호를 선택할 수 있다.

---

## OUTRO
함수 종속성에 대한 정의를 알아가는 과정에서 수학적인 용어가 등장해 처음부터 낯설게 느껴졌지만 각각의 의미를 이해하고 나니 속성간의 의미있는 관계를 파악하는 것이 중요하다는 것을 깨달았다.

또한 다이어그램을 통해 함수 종속성의 유형을 파악하는 과정을 시각적으로 표현해보면서 어떤 종속적인 관계를 가지는지 이해할 수 있었다.

마지막으로 기본키 선택의 중요성을 이해하면서 어떤 속성을 기본키로 선택하는지에 대한 감을 잡을 수 있게되었다.

이렇게 함수 종속적 관계의 이해를 통해 정규화 작업에 한 걸음 더 도전할 수 있다는 자신감이 생겼다.