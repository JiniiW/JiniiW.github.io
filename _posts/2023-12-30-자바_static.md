---
title: "[JAVA] static 키워드의 의미와 활용"
excerpt: "static keyword"

categories:
  - Java
tags:
  - [static, 키워드, 변수, 메모리, final]

permalink: /java/2023-12-30-JAVA_static/

toc: true
toc_sticky: true

date: 2023-12-30
last_modified_at: 2023-12-30
---
## Intro
처음 자바를 배우면서 static 키워드를 사용하면서 인스턴스 생성없이 변수나 메서드를 직접 호출하다는 것은 정말 신기하고 편리하게 느껴졌다.

그런데 이런 static멤버들을 어떤 상황에서는 사용하지 못하고 어떤 상황에서는 사용 가능한 것인지 궁금증이 생겼다.

처음에는 간단하게 생각해서 method 영역에 할당되기 때문에 모든 값을 공유해서 그런줄 알았다.

하지만 JVM의 메모리 영역에 대해 공부하면서 메서드 영역에는 static 메서드는 물론 일반적인 메서드들도 같이 저장이 되기 때문에 나의 궁금중에 대한 정확한 답이 아니라는 것을 깨달았다.

그럼 이제 궁금증을 해결해보자

---

## static

static 키워드를 사용할 수 있는 필드와 메서드를 합쳐서 static 멤버라 한다.

static은 '고정된', '공통적인'의미를 가지며 변수나 메서드 앞에 붙여 사용할 수 있다.

그럼 이러한 이유를 가지게 된 이유는 무엇일까?

바로 static이 클래스 수준의 키워드이기 때문이다.


## 클래스 수준

> 클래스 수준 : 클래스의 인스턴스화 여부와 관계없이 클래스 자체에 연결된 것

더 쉽게 이해해보자

static이 클래스 수준이라는 것은 클래스에 고정되어 있는 변수나 메서드라는 것이다.

코드로 확인해보자 (원래는 인스턴스를 생성하지 않고 바로 호출할 수 있지만 확인을 위해 생성해보겠다.)
```java
class Example{
    static int number;
}

public class StaticMain {
    public static void main(String[] args) {
        Example.number = 5; //직접 호출

        Example one = new Example(); //인스턴스 생성
        one.number = 10;

        Example two = new Example();
        two.number = 20;

        System.out.println(one.number); //20
        System.out.println(two.number); //20
        System.out.println(Example.number); //20
    }
}
```
처음에는 static 변수를 직접 호출하여 5를 저장했다.<br>
하지만 그 후에 Example 클래스를 one, two라는 여러 객체를 선언하여 값을 변경해준 결과 최종 저장된 20으로 모두 출력된다.<br>
즉, static 변수는 여러 객체에 상관없이 고정된 값을 공유한다는 것이다.

때문에 static이 붙으면 클래스 수준의 멤버이기 때문에 인스턴스 생성 없이 직접 호출을 통해 사용할 수 있다.

**그러면 static 메서드를 작성할 때 인스턴스 변수를 사용할 수 있을까?** <br>
불가능하다. 왜냐하면 static 멤버와 인스턴스 변수가 저장되는 메모리 영역이 다르기 때문이다.

## 메모리 영역

JVM에 의해 바이트코드가 해석되어 Runtime Data Area의 각각의 영역에 저장될 때 static 멤버와 인스턴스 멤버는 각각 다른 영역에 저장된다.

각각의 영역에 따른 메모리의 할당 시점 차이이다.<br>
- static 멤버 : method 영역에 저장, 컴파일시 값 초기화 및 클래스 로딩 시점에서 메모리 할당
- 인스턴스 멤버 : Haep 영역에 저장, 객체가 생성되는 시점에 메모리 할당

>이러한 메모리 할당 시점의 차이로 인해, static 멤버와 인스턴스 멤버는 함께 사용할 수 없다.

왜냐하면 인스턴스 객체가 생성이 안된채로 인스턴스 멤버에 접근할 수 없기 때문이다.

### 1. 인스턴스 변수
> static 메서드에서는 인스턴스 변수에 직접적으로 접근할 수 없다.
  
인스턴스 변수는 객체가 생성될 때 메모리에 할당되지만 static 메서드는 클래스 로딩 시 메모리에 할당되므로 static 메서드가 인스턴스 변수에 접근할 수 없다.
때문에 **`this` 키워드**를 사용할 수 없다.

### 2. 인스턴스 메서드
> static 메서드에서는 인스턴스 메서드를 직접 호출할 수 없다.

인스턴스 메서드는 객체의 상태나 특정한 객체에 종속된 동작을 수행하는데 static 메서드는 모든 객체가 공유하기 때문이다.

그러면 static과 final키워드를 비교하며 개념을 정리하자.

## final 키워드
final 키워드는 '최종적인'의미를 가진다.<br>
즉 변수를 선언할 때 final키워드를 붙이면 값을 변경할 수 없다.


### 1. static 변수
static 변수는 해당 클래스의 모든 객체들이 값을 공유하며 수정가능하다.<br>
수정된 값은 모든 객체들한테 반영된다.

### 2. final 변수
final 변수는 인터페이스 변수로 해당 클래스의 객체가 생성되야 사용 가능하고 값을 한번 저장하면 변경할 수 없다.<br>
객체마다 다른 값을 저장할 수 있다.

### 3. static final 상수

static final은 상수를 선언할 때 사용된다.<br>
이렇게 선언된 상수는 여러 객체를 생성하면 같은 값을 가져오고 한번 저장된 값은 변경할 수 없다.<br>
ex) PI

---

## Outro

이번에 static 키워드와 메모리 할당의 관계를 자세히 공부하면서 정리되지 않았던 개념을 확실히 깨달았다.

특히 클래스 수준이란 의미가 무엇인가에 대해 몇시간동안 알아보고 고민해보면서 그 의미를 이해한것이 만족스럽다.

앞으로는 static method에서 this를 사용 할 수 없다는 사실을 까먹지 않을 것 같다.