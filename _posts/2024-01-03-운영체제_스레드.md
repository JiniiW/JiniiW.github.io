---
title: "[OS] 스레드(Threads)"
excerpt: "스레드"

categories:
  - OS
tags:
  - [스레드]

permalink: /os/2024-01-03-OS_Threads/

toc: true
toc_sticky: true

date: 2024-01-03
last_modified_at: 2024-01-08
---

운영체제는 컴퓨터 시스템의 핵심 부분으로 다양한 작업을 관리하고 조율하는 역할을 한다. <br>

스레드는 운영체제에서 중요한 개념으로 단일 프로세스 내에서 여러 스레드가 동작함으로써 프로그램 간의 실행을 관리하며 시스템의 자원을 효율적으로 활용할 수 있도록 지원한다.

<br>

### 1. 스레드 정의

> 스레드 : 프로세스를 구성하는 실행 흐름 단위

스레드는 프로세스를 구성하는 실행 흐름 단위로 하나의 프로세스는 여러 개의 스레드를 가질 수 있다. <br>
떄문에 스레드를 통해 하나의 프로세스에서 여러 부분을 동시에 실행 가능하다. 

<br>

### 2. 프로세스와 스레드
실행의 흐름 단위가 하나라는 가정하에 실행되는 프로세스들은 단일 프로세스로 볼 수 있다.<br>
여기서 스레드라는 개념이 도입되면서 하나의 프로세스가 한 번에 여러 일을 동시에 처리하게 되어 여러 명령어를 동시에 실행 할 수 있게 되었다.<br>

때문에 스레드는 프로세스를 구성하는 실행단위라 말할 수 있다.
<br>

> 스레드는 실행에 필요한 자원의 최소한의 정보(레지스터, 스택)만 유지한 채 프로세스 자원을 공유하며 실행 된다.

<img src = "{{url}}/images/2024-01-03-OS_threads/멀티_스레드_구조.png" width = "90%">

#### 결론
프로세스가 실행되는 프로그램이라면 스레드는 프로세스를 구성하는 실행의 흐름 단위다. <br>
스레드는 자원을 공유한 채 최소한의 정보만으로 실행된다.

<br>

### 3. 멀티 프로세스와 멀티 스레드
- 멀티 프로세스 : 여러 프로세스를 동시에 실행한다.
- 멀티 스레드 : 여러 스레드로 프로세스를 동시에 실행한다.

<br>
**그럼 멀티 프로세스와 멀티 스레드의 실행 차이가 무엇일까?** <br>
> 프로세스와 스레드의 가장 큰 차이는 자원 공유 여부이다.

<img src = "{{url}}/images/2024-01-03-OS_threads/멀티_프로세스_멀티_스레드.png" width = "70%">

#### 1. 멀티 프로세스
멀티 프로세스는 동일한 프로세스를 동시에 실행하면 <mark>자원을 공유하지 않기 때문에</mark> 코드영역, 데이터 영역, 힙 영역을 비롯한 모든 자원이 복제되어 메모리에 적재된다.<br>
- **PID, 메모리 주소를 제외**한 모든 것이 동일한 프로세스가 통째로 메로리에 적재된다. <br>

같은 프로그램을 실행하기 위해 메모리에 동일한 내용이 중복되기 때문에 낭비라고 할 수 있다.<br>
<br>

#### 2. 멀티 스레드
멀티 스레드는 각기 다른 스레드 ID, 레지스터 값, 스택만 가질뿐 나머지는 <mark>프로세스의 자원을 공유</mark>한다. <br>
때문에 멀티 프로세스보다 메모리를 더 효율적으로 사용할 수 있다.<br>
하지만 하나의 스레드에 문제가 발생할 경우 전체 프로세스가 영향을 받을 수 있다.

멀티 프로세스는 독립적으로 실행되고 멀티 스레드는 프로세스의 자원 공유를 통해 협력과 통신에 유리하다.
{: .notice}

**프로세스간 통신(IPC)** <br>
프로세스는 기본적으로 자원을 공유하지 않지만 프로세스간 통신을 위해 데이터를 **공유 메모리 영역**에 저장하여 주고 받을 수 있다.<br>
&nbsp; ex) 파일을 통한 프로세스간 통신 : 파일 하나를 두 프로세스가 주는 경우<br>

<br>

#### 결론
스레드는 프로세스의 실행 단위로 하나의 프로세스는 스레드를 통해 동시에 여러 작업을 처리할 수 있다. <br>
멀티 스레드는 메모리를 효율적으로 사용 가능하지만 하나의 프로세스에 문제가 발생할 경우 전체 프로세스가 영향을 받을 수 있다.<br>
멀티 프로세스는 메모리 낭비가 발생 할 수 있지만 다른 프로세스에 영향을 끼치지 않는다. 